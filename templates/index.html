{% extends "base.html" %}

{% block title %}Kolam Pattern Generator{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <!-- Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="text-center">
                <h1 class="display-4 text-primary">
                    <i class="fas fa-star-of-david me-3"></i>
                    Kolam Pattern Generator
                </h1>
                <p class="lead text-muted">
                    Create beautiful traditional Indian geometric patterns using mathematical principles
                </p>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Control Panel -->
        <div class="col-lg-4">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-cogs me-2"></i>Pattern Controls
                    </h5>
                </div>
                <div class="card-body">
                    <!-- Pattern Type Selection -->
                    <div class="mb-3">
                        <label class="form-label fw-bold">Pattern Type</label>
                        <div class="row">
                            <div class="col-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="patternType" value="pulli" id="pulli" checked>
                                    <label class="form-check-label" for="pulli">
                                        Pulli Kolam
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="patternType" value="sikku" id="sikku">
                                    <label class="form-check-label" for="sikku">
                                        Sikku Kolam
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="patternType" value="kambi" id="kambi">
                                    <label class="form-check-label" for="kambi">
                                        Kambi Kolam
                                    </label>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="patternType" value="flower" id="flower">
                                    <label class="form-check-label" for="flower">
                                        Flower Pattern
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="patternType" value="mandala" id="mandala">
                                    <label class="form-check-label" for="mandala">
                                        Mandala
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <!-- Dynamic Parameters -->
                    <div id="parameters">
                        <!-- Pulli Kolam Parameters -->
                        <div id="pulli-params" class="parameter-group">
                            <div class="row mb-3">
                                <div class="col-6">
                                    <label for="rows" class="form-label">Rows</label>
                                    <input type="number" class="form-control" id="rows" value="5" min="3" max="15">
                                </div>
                                <div class="col-6">
                                    <label for="cols" class="form-label">Columns</label>
                                    <input type="number" class="form-control" id="cols" value="5" min="3" max="15">
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Style</label>
                                <div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="pulliStyle" value="basic" id="basic" checked>
                                        <label class="form-check-label" for="basic">Basic</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="pulliStyle" value="diamond" id="diamond">
                                        <label class="form-check-label" for="diamond">Diamond</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Sikku Kolam Parameters -->
                        <div id="sikku-params" class="parameter-group d-none">
                            <div class="mb-3">
                                <label for="complexity" class="form-label">Complexity: <span id="complexity-value">3</span></label>
                                <input type="range" class="form-range" id="complexity" min="1" max="5" value="3" 
                                       oninput="document.getElementById('complexity-value').textContent = this.value">
                            </div>
                        </div>

                        <!-- Kambi Kolam Parameters -->
                        <div id="kambi-params" class="parameter-group d-none">
                            <div class="mb-3">
                                <label for="size" class="form-label">Size</label>
                                <input type="number" class="form-control" id="size" value="6" min="4" max="12">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Style</label>
                                <div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="kambiStyle" value="geometric" id="geometric" checked>
                                        <label class="form-check-label" for="geometric">Geometric</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="kambiStyle" value="star" id="star">
                                        <label class="form-check-label" for="star">Star</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Flower Parameters -->
                        <div id="flower-params" class="parameter-group d-none">
                            <div class="mb-3">
                                <label for="petals" class="form-label">Petals: <span id="petals-value">8</span></label>
                                <input type="range" class="form-range" id="petals" min="4" max="16" value="8"
                                       oninput="document.getElementById('petals-value').textContent = this.value">
                            </div>
                            <div class="mb-3">
                                <label for="layers" class="form-label">Layers: <span id="layers-value">3</span></label>
                                <input type="range" class="form-range" id="layers" min="1" max="5" value="3"
                                       oninput="document.getElementById('layers-value').textContent = this.value">
                            </div>
                        </div>

                        <!-- Mandala Parameters -->
                        <div id="mandala-params" class="parameter-group d-none">
                            <div class="mb-3">
                                <label for="rings" class="form-label">Rings: <span id="rings-value">4</span></label>
                                <input type="range" class="form-range" id="rings" min="2" max="8" value="4"
                                       oninput="document.getElementById('rings-value').textContent = this.value">
                            </div>
                            <div class="mb-3">
                                <label for="segments" class="form-label">Segments: <span id="segments-value">8</span></label>
                                <input type="range" class="form-range" id="segments" min="4" max="16" value="8"
                                       oninput="document.getElementById('segments-value').textContent = this.value">
                            </div>
                        </div>
                    </div>

                    <hr>

                    <!-- Action Buttons -->
                    <div class="d-grid gap-2">
                        <button class="btn btn-primary btn-lg" id="generate-btn">
                            <i class="fas fa-magic me-2"></i>Generate Pattern
                        </button>
                        <button class="btn btn-info" id="analyze-btn" disabled>
                            <i class="fas fa-search me-2"></i>Analyze Symmetries
                        </button>
                        <div class="btn-group" role="group">
                            <button class="btn btn-success" id="export-png-btn" disabled>
                                <i class="fas fa-download me-1"></i>PNG
                            </button>
                            <button class="btn btn-success" id="export-svg-btn" disabled>
                                <i class="fas fa-download me-1"></i>SVG
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pattern Information -->
            <div class="card shadow-sm mt-3" id="pattern-info" style="display: none;">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-info-circle me-2"></i>Pattern Information
                    </h5>
                </div>
                <div class="card-body">
                    <div id="pattern-details"></div>
                </div>
            </div>
        </div>

        <!-- Display Area -->
        <div class="col-lg-8">
            <div class="card shadow-sm">
                <div class="card-header bg-secondary text-white d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">
                        <i class="fas fa-eye me-2"></i>Pattern Visualization
                    </h5>
                    <div class="btn-group btn-group-sm" role="group">
                        <button class="btn btn-outline-light" id="zoom-in-btn">
                            <i class="fas fa-search-plus"></i>
                        </button>
                        <button class="btn btn-outline-light" id="zoom-out-btn">
                            <i class="fas fa-search-minus"></i>
                        </button>
                        <button class="btn btn-outline-light" id="reset-zoom-btn">
                            <i class="fas fa-expand-arrows-alt"></i>
                        </button>
                    </div>
                </div>
                <div class="card-body text-center">
                    <div id="pattern-display">
                        <div class="py-5">
                            <i class="fas fa-star-of-david fa-3x text-muted mb-3"></i>
                            <p class="text-muted">Generate a pattern to see it visualized here</p>
                        </div>
                    </div>
                    
                    <!-- Loading spinner -->
                    <div id="loading" class="d-none">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="mt-2 text-muted">Generating pattern...</p>
                    </div>
                </div>
            </div>

            <!-- Symmetry Analysis -->
            <div class="card shadow-sm mt-3" id="symmetry-analysis" style="display: none;">
                <div class="card-header bg-warning">
                    <h5 class="mb-0">
                        <i class="fas fa-balance-scale me-2"></i>Symmetry Analysis
                    </h5>
                </div>
                <div class="card-body">
                    <div id="symmetry-results"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modals -->
<!-- Error Modal -->
<div class="modal fade" id="errorModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">
                    <i class="fas fa-exclamation-triangle me-2"></i>Error
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p id="error-message"></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/generator.js') }}"></script>
{% endblock %}
